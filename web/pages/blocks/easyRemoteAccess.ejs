<% const p2pServerList = config.p2pServerList || {}
    const selectedServer = p2pServerList[config.p2pHostSelected]
 %>
 <style>
     .epic-text-filter {
         text-transform: none;
        letter-spacing: 0.5pt;
        font-size: 9pt;
     }
 </style>
 <script>
     window.p2pServerList = <%- JSON.stringify(p2pServerList) %>
     window.currentlySelectedP2PServerId = `<%- config.p2pHostSelected %>`
 </script>
<link rel="stylesheet" href="<%-window.libURL%>libs/css/super.easyRemoteAccess.css">
<form>
    <div class="mb-4 btn-group" style="display:flex">
        <a style="flex:6" href="#" class="submit btn btn-default"><i class="fa fa-check"></i> <%- lang.Save %></a>
        <a style="flex:6" target="_blank" href="#" class="btn btn-info remote-dashboard-link"><i class="fa fa-external-link"></i> <%- lang['Open Dashboard Remotely'] %></a>
    </div>
    <div class="form-group">
        <label>
            <div><span><%-lang['Enabled']%></span></div>
            <div><select class="form-control" type="email" name="p2pEnabled">
                <option <% if(config.p2pEnabled === true){ %>selected<% } %> value="1">Yes</option>
                <option <% if(config.p2pEnabled !== true){ %>selected<% } %> value="0">No</option>
            </select></div>
        </label>
    </div>
    <div class="form-group">
        <label>
            <div><span><%-lang['P2P API Key']%></span></div>
            <div><input class="form-control" type="text" name="p2pApiKey" value="<%- config.p2pApiKey %>"></div>
        </label>
    </div>
    <blockquote class="text-center mt-4 mb-4" style="background: #fff;
        border: 2px solid #c79d05;
    border-radius: 15px;
    padding: 10px;
    font-style: italic;">
        <p><b>This feature is for subscribers only.</b> To get an API Key please login to your <a class="btn badge badge-sm badge-default" href="https://licenses.shinobi.video/login" target="_blank">Shinobi<b>Shop</b></a> account and create a key associated to <b>any active Subscription ID</b>.</p>
        <p class="mb-0">If you would like to get access to a private (dedicated) P2P server please create an account at the <a class="btn badge badge-sm badge-default" href="https://licenses.shinobi.video/login" target="_blank">Shinobi<b>Shop</b></a> and contact us via the Live Chat widget.</p>
    </blockquote>
    <div class="form-group">
        <div class="row" id="p2pServerList">
            <% Object.keys(p2pServerList).forEach((key) => {
                const details = p2pServerList[key]
            %>
                <div class="col-md-4 mt-2">
                    <div class="card <% if(config.p2pHostSelected === key){ %>active<% } %>" drawn-id="<%- key %>">
                        <div class="card-header" style="min-height:auto">
                            <span class="badge badge-sm badge-info name-badge"><%- details.name %></span>
                        </div>
                        <div style="min-height:auto">
                            <table class="table table-striped mb-0 text-center">
                                <tr title="Host Address">
                                    <td><i class="fa fa-globe"></i></td>
                                    <td class="text-left epic-text epic-text-filter"><%- lang.Host %></td>
                                    <td class="text-right"><span class="badge badge-sm badge-default"><%- details.host %></span></td>
                                </tr>
                                <tr>
                                    <td><i class="fa fa-bolt"></i></td>
                                    <td class="text-left epic-text epic-text-filter"><%- lang.Bandwidth %></td>
                                    <td class="text-right">
                                        <span title="Download Usage" class="badge badge-sm badge-default"><span class="networkUseDown"><i class="fa fa-spinner fa-pulse"></i></span> / <%- details.maxNetworkSpeed.down %></span>
                                        <span title="Upload Usage" class="badge badge-sm badge-default"><span class="networkUseUp"><i class="fa fa-spinner fa-pulse"></i></span> / <%- details.maxNetworkSpeed.up %></span>
                                    </td>
                                </tr>
                                <tr title="CPU Usage">
                                    <td><i class="fa fa-cubes"></i></td>
                                    <td class="text-left epic-text epic-text-filter"><span class="cpuCores"></span> <%- lang.Cores %></td>
                                    <td class="text-right"><span class="badge badge-sm badge-default"><span class="cpuUsage"><i class="fa fa-spinner fa-pulse"></i></span>%</span></td>
                                </tr>
                                <tr title="RAM Usage">
                                    <td><i class="fa fa-tasks"></i></td>
                                    <td class="text-left epic-text epic-text-filter"><span class="ramTotal"><i class="fa fa-spinner fa-pulse"></i></span> <%- lang.RAM %></td>
                                    <td class="text-right"><span class="badge badge-sm badge-default"><span class="ramPercent"><i class="fa fa-spinner fa-pulse"></i></span>%, <span class="ramUsed"><i class="fa fa-spinner fa-pulse"></i></span> MB</span></td>
                                </tr>
                            </table>
                        </div>
                        <div class="card-footer" style="min-height:auto">
                            <a class="btn badge badge-sm badge-default" target="_blank" href="<%- `https://www.google.ca/maps/@${details.location.lat},${details.location.lon},15z` %>"><i class="fa fa-map-marker"></i> <%- details.location.lat %>, <%- details.location.lon %></a>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
    </div>
</form>
<script src="<%-window.libURL%>libs/js/super.easyRemoteAccess.js" type="text/javascript"></script>
