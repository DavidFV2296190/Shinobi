<% const p2pServerList = config.p2pServerList || {}
    const selectedServer = p2pServerList[config.p2pHostSelected]
 %>
 <script>
     window.p2pServerList = <%- JSON.stringify(p2pServerList) %>
     window.currentlySelectedP2PServerId = `<%- config.p2pHostSelected %>`
 </script>
<link rel="stylesheet" href="<%-window.libURL%>libs/css/super.easyRemoteAccess.css">
<form>
    <div class="mb-4 btn-group" style="display:flex">
        <a style="flex:6" href="#" class="submit btn btn-default"><i class="fa fa-check"></i> <%- lang.Save %></a>
        <a style="flex:6" target="_blank" href="#" class="btn btn-info remote-dashboard-link"><i class="fa fa-external-link"></i> <%- lang['Open Dashboard Remotely'] %></a>
    </div>
    <div class="form-group">
        <label>
            <div><span><%-lang['Enabled']%></span></div>
            <div><select class="form-control" type="email" name="p2pEnabled">
                <option <% if(config.p2pEnabled === true){ %>selected<% } %> value="1">Yes</option>
                <option <% if(config.p2pEnabled !== true){ %>selected<% } %> value="0">No</option>
            </select></div>
        </label>
    </div>
    <div class="form-group">
        <label>
            <div><span><%-lang['P2P API Key']%></span></div>
            <div><input class="form-control" type="text" name="p2pApiKey" value="<%- config.p2pApiKey %>"></div>
        </label>
    </div>
    <div class="form-group">
        <div class="row" id="p2pServerList">
            <% Object.keys(p2pServerList).forEach((key) => {
                const details = p2pServerList[key]
            %>
                <div class="col-md-3 mt-2">
                    <div class="card <% if(config.p2pHostSelected === key){ %>active<% } %>" drawn-id="<%- key %>">
                        <div class="card-header" style="min-height:auto">
                            <span class="badge badge-sm badge-info name-badge"><%- details.name %></span>
                        </div>
                        <div class="card-body" style="min-height:auto">
                            <div title="Host Address">
                                <span class="badge badge-sm badge-default"><i class="fa fa-globe"></i></span> <span class="badge badge-sm badge-default"><%- details.host %></span>
                            </div>
                            <div title="Network Speed">
                                <span class="badge badge-sm badge-default"><i class="fa fa-bolt"></i></span> <span class="badge badge-sm badge-default"><%- details.maxNetworkSpeed.down %> / <%- details.maxNetworkSpeed.up %><%- details.maxNetworkSpeed.shared ? ' Shared Bandwidth' : '' %></span>
                            </div>
                        </div>
                        <div class="card-footer" style="min-height:auto">
                            <span class="badge badge-sm badge-default"><i class="fa fa-map-marker"></i> <%- details.location.lat %>, <%- details.location.lon %></span>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
    </div>
</form>
<script src="<%-window.libURL%>libs/js/super.easyRemoteAccess.js" type="text/javascript"></script>
